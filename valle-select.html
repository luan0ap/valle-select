<link rel="import" href="../polymer/polymer-element.html">

<dom-module id="valle-select">
  <template>

    <style>

      :host {
        display: inline-block;
        position: relative;
        overflow: hidden;
      }

      .visual-hidden {
        position: absolute;
        left: -10000px;
      }

    </style>

    <label id="label">[[label]]</label>
    
    <input
      type="text"
      tabindex="-1"
      aria-readonly="true"
      aria-owns="listbox"
      aria-labelledby="label">

    <button
      aria-haspopup="listbox"
      aria-expanded="false"
      aria-pressed="false"
      aria-labelledby="label button"
      aria-describedby="description"
      id="button">

    </button>

    <ul 
      role="listbox"
      tabindex="-1"
      style="display: none;"
      aria-labelledby="label"
      id="listbox">

      <slot></slot>

    </ul>

    <template is="dom-if" if={{_isNoError(error,helpertext)}}>
      <small id="description">[[helpertext]]</small>
    </template>

    <template is="dom-if" if=[[error]]>
      <span id="description" role="alert">
        [[errortext]]<small class="visual-hidden">: [[helpertext]]</small>
      </span>
    </template>

  </template>

  <script>
    class valleElement extends Polymer.Element {

      static get is() { return 'valle-select'; }

      _isNoError(error, helperText) {
        return !error && helperText;
      }

      static get properties() {
        return {
          label: String,
          helpertext: String,
          errortext: String,
          error: Boolean
        };
      }

    }

    window.customElements.define(valleElement.is, valleElement);
  </script>
</dom-module>
